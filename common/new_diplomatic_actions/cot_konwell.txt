# Create new diplomatic actions like this. AI will currently never send them.
# make_tributary_anb = {
# 	category = influence
	
# 	alert_index = 40
# 	alert_tooltip = demand_dummy_alert_tooltip
	
# 	require_acceptance = yes # Whether the recipient gets an option to decline
	
# 	is_visible = {
# 		is_subject = no
# 		FROM = {
# 			is_subject_of_type = vassal
# 			is_subject_of = ROOT		
# 		}
# 		if = {
# 			limit = { tag = H78 } #seghdihr
# 			FROM = { NOT = { culture_is_dwarven = yes } }
# 		}
# 	}
# 	is_allowed = {
# 		hidden_trigger = {
# 			is_subject = no
# 			FROM = {
# 				is_subject_of_type = vassal
# 				is_subject_of = ROOT		
# 			}
# 		}
# 		reverse_has_opinion = {
# 			who = FROM
# 			value = 0
# 		}
# 		FROM = {
# 			is_subject_of_type = vassal
# 			is_subject_of = ROOT		
# 		}
# 	}
# 	on_accept = {
# 		add_trust = {
# 			who = FROM
# 			value = 10
# 			mutual = yes
# 		}
# 		create_subject = {
# 			subject_type = autonomous_vassal
# 			subject = FROM 
# 		}
# 	}
# 	on_decline = 	{
# 	}
	
# 	ai_acceptance = { # This works similarly to variable_arithmetic_trigger, but does not support triggers generally. Instead, "limit" will be evaluated first and the rest ignored if it isn't passed.
# 	}

# 	ai_will_do = { # this is a trigger
# 		always = no
# 	}
# }

cot_konwell_legit = {
	category = influence
	
	alert_index = 42
	alert_tooltip = demand_dummy_alert_tooltip
	
	is_visible = {
		has_country_flag = konwell_cot_sell_records_flag
	}
	
	is_allowed = {
		FROM = {
			NOT = { legitimacy = 91 }
			religion_group = ROOT
			ai = no
			NOT = { has_country_modifier = konwell_cot_sell_records }
		}
	}
	
	on_accept = {
		FROM = {
			add_country_modifier = {
				name = konwell_cot_sell_records
				duration = 3650 # 10 years
			}
			add_dip_power = -50
		}
		ROOT = {
			add_dip_power = 25
		}
	}
	
	on_decline = {
	}
	
	ai_acceptance = {
	}
	
	ai_will_do = {
		always = no
	}
}

cot_konwelledge_sharing = {
	category = economy
	
	alert_index = 42
	alert_tooltip = demand_dummy_alert_tooltip
	
	is_visible = {
		has_country_flag = konwell_cot_sell_inst_flag
	}
	
	is_allowed = {
		FROM = {
			NOT = { current_institution_growth = 6 }
			NOT = { has_country_modifier = konwell_cot_paying }
		}
		institution_difference = {
			who = FROM
			value = 1
		}
	}
	
	on_accept = {
		FROM = {
			add_country_modifier = {
				name = knowell_cot_paying
				duration = 7300 # 20 years
			}
			capital_scope = {
				type = all
				add_province_modifier = {
					name = konwell_cot_visitations
					duration = 7300 # 20 years
				}
			}
		}
		ROOT = {
			add_adm_power = -25
			add_years_of_income = 1
		}
	}
	
	on_decline = {
	}
	
	ai_acceptance = {
	}
	
	ai_will_do = {
		factor = 1
		modifier = {
			is_in_deficit = yes
			factor = 0
		}
		modifier = {
			num_of_loans = 10
			factor = 0.5
		}
		modifier = {
			num_of_loans = 20
			factor = 0.1
		}
		modifier = {
			NOT = {
				has_opinion = {
					who = ROOT
					value = -100
				}
			}
			factor = 0.01
		}
	}
}

cot_konwell_kobold = {
	category = economy
	
	alert_index = 42
	alert_tooltip = demand_dummy_alert_tooltip
	
	is_visible = {
		has_country_flag = konwell_cot_sell_inst_flag
	}
	
	is_allowed = {
		FROM = {
			NOT = { has_country_flag = kon_kob_III_flag }
			ai = no
			adm_power = 100
		}
	}
	
	on_accept = {
		FROM = {
			random_owned_province = {
				add_kobold_minority_size_effect = yes
			}
			add_adm_power = -100
			if = {
				limit = {
					has_country_flag = kon_kob_II_flag
				}
				set_country_flag = kon_kob_III_flag
				small_increase_of_kobold_tolerance_effect = yes
				define_advisor = {
					name = "Gnomo 'Scale-Lover'"
					type = master_of_mint
					skill = 2
					culture = redscale_kobold
					discount = yes
					cost_multiplier = 0.75
				}
			}
			else_if = {
				limit = {
					has_country_flag = kon_kob_I_flag
				}
				set_country_flag = kon_kob_II_flag
				small_increase_of_kobold_tolerance_effect = yes
				define_advisor = {
					name = "Natta Cobolt"
					type = natural_scientist
					skill = 2
					culture = redscale_kobold
					discount = yes
					cost_multiplier = 0.75
				}
			}
			else = {
				set_country_flag = kon_kob_I_flag
				small_increase_of_kobold_tolerance_effect = yes
				define_advisor = {
					name = "Totali Anome"
					type = fortification_expert
					skill = 2
					culture = redscale_kobold
					discount = yes
					cost_multiplier = 0.75
				}
			}
		}
		ROOT = {
			add_adm_power = -50
			change_reform_progress = 25
		}
	}
	
	on_decline = {
	}
	
	ai_acceptance = {
	}
	
	ai_will_do = {
		always = no
	}
}